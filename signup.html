<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Job Application Form</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Animate.css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <!-- SweetAlert2 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    
    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #1e40af;
            --accent-color: #f59e0b;
            --light-color: #f8fafc;
            --dark-color: #1e293b;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .form-container {
            max-width: 600px;
            margin: auto;
            margin-top: 50px;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            background-color: #fff;
            border: 1px solid rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }
        
        .form-container:hover {
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.12);
            transform: translateY(-5px);
        }
        
        .form-header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }
        
        .form-header h4 {
            font-weight: 700;
            color: var(--dark-color);
            position: relative;
            display: inline-block;
        }
        
        .form-header h4::after {
            content: '';
            position: absolute;
            width: 50px;
            height: 3px;
            background: var(--primary-color);
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 3px;
        }
        
        .form-control {
            padding: 12px 15px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }
        
        .form-control:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.25rem rgba(37, 99, 235, 0.15);
        }
        
        .form-label {
            font-weight: 600;
            color: var(--dark-color);
            margin-bottom: 8px;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            border: none;
            padding: 12px;
            font-weight: 600;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(37, 99, 235, 0.3);
        }
        
        .form-check-input:checked {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .file-upload-wrapper {
            position: relative;
            margin-bottom: 20px;
        }
        
        .file-upload-label {
            display: block;
            padding: 12px;
            border: 2px dashed #e2e8f0;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .file-upload-label:hover {
            border-color: var(--primary-color);
            background-color: rgba(37, 99, 235, 0.05);
        }
        
        .file-upload-icon {
            font-size: 24px;
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        
        .file-name {
            display: block;
            margin-top: 8px;
            font-size: 14px;
            color: var(--dark-color);
        }
        
        .progress {
            height: 8px;
            margin-top: 10px;
            border-radius: 4px;
            display: none;
        }
        
        .progress-bar {
            background-color: var(--primary-color);
            transition: width 0.6s ease;
        }
        
        .social-icon {
            color: var(--primary-color);
            margin-right: 5px;
        }
        
        /* Animations */
        .animate-form {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.8s forwards;
        }
        
        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .delay-1 {
            animation-delay: 0.2s;
        }
        
        .delay-2 {
            animation-delay: 0.4s;
        }
        
        .delay-3 {
            animation-delay: 0.6s;
        }
    </style>
</head>

<body class="bg-light d-flex align-items-center">
    <div class="container">
        <div class="form-container animate__animated animate__fadeInUp">
            <div class="form-header">
                <h4 class="animate__animated animate__fadeIn">Job Application Form</h4>
                <p class="text-muted animate__animated animate__fadeIn delay-1">Join our team of talented professionals</p>
            </div>
            
            <form id="submit-to-google-sheet">
                <div class="form-group mb-4 animate-form delay-1">
                    <label for="name" class="form-label">Full Name</label>
                    <input class="form-control" type="text" name="name" id="name" placeholder="Your full name" required />
                </div>
                
                <div class="form-group mb-4 animate-form delay-1">
                    <label for="email" class="form-label">Email Address</label>
                    <input class="form-control" type="email" name="email" id="email" placeholder="your.email@example.com" required />
                </div>
                
                <div class="form-group mb-4 animate-form delay-2">
                    <label for="contact_number" class="form-label">Contact Number</label>
                    <input class="form-control" type="tel" name="contact_number" id="contact_number" placeholder="+91 9876543210" required />
                </div>
                <div class="form-group mb-4 animate-form delay-2">
                    <label for="plan" class="form-label">Select Plan</label>
                    <select class="form-select" name="plan" id="plan" required>
                        <option value="" disabled selected>Choose your plan</option>
                        <option value="2000">Basic Plan (₹2000)</option>
                        <option value="5000">Premium Plan (₹5000)</option>
                    </select>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group mb-4 animate-form delay-2">
                            <label for="github" class="form-label">
                                <i class="fab fa-github social-icon"></i>GitHub Profile
                            </label>
                            <input class="form-control" type="url" name="github" id="github" placeholder="https://github.com/username" />
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group mb-4 animate-form delay-2">
                            <label for="linkedin" class="form-label">
                                <i class="fab fa-linkedin social-icon"></i>LinkedIn Profile
                            </label>
                            <input class="form-control" type="url" name="linkedin" id="linkedin" placeholder="https://linkedin.com/in/username" />
                        </div>
                    </div>
                </div>
                
                <div class="form-group mb-4 animate-form delay-3">
                    <label class="form-label">Upload Your CV</label>
                    <div class="file-upload-wrapper">
                        <label for="cv" class="file-upload-label">
                            <div class="file-upload-icon">
                                <i class="fas fa-cloud-upload-alt"></i>
                            </div>
                            <span>Drag & drop your CV here or click to browse</span>
                            <small class="text-muted d-block">(PDF or DOCX, max 2MB)</small>
                            <span id="file-name" class="file-name"></span>
                        </label>
                        <input type="file" name="cv" id="cv" class="d-none" accept=".pdf,.doc,.docx" required />
                        <div class="progress">
                            <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </div>
                </div>
                
                <div class="form-group form-check mb-4 animate-form delay-3">
                    <input class="form-check-input" type="checkbox" id="consent" required />
                    <label class="form-check-label" for="consent">
                        I consent to the processing of my personal data for recruitment purposes in accordance with the <a href="#" data-bs-toggle="modal" data-bs-target="#privacyModal">Privacy Policy</a>.
                    </label>
                </div>
                
                <div class="d-grid animate-form delay-3">
                    <button type="submit" class="btn btn-primary btn-lg">
                        <span id="submit-text">Submit Application</span>
                        <span id="submit-spinner" class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true"></span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Privacy Policy Modal -->
    <div class="modal fade" id="privacyModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Privacy Policy</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>We collect and process your personal data solely for recruitment purposes. Your information will be kept confidential and will not be shared with third parties without your explicit consent.</p>
                    <p>By submitting this application, you agree to our data processing practices as described in our full Privacy Policy.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <script>
        const scriptURL = "https://script.google.com/macros/s/AKfycbwgavixZJLbnYHO79KRyn_kJtRDJXuJA1CIPblPpVMXJGF4nL3mRWKHlWC1hf6e56m_/exec";
        const form = document.getElementById("submit-to-google-sheet");
        const cvInput = document.getElementById("cv");
        const fileName = document.getElementById("file-name");
        const progressBar = document.querySelector(".progress");
        const progress = document.querySelector(".progress-bar");
        const submitText = document.getElementById("submit-text");
        const submitSpinner = document.getElementById("submit-spinner");

        // File upload display
        cvInput.addEventListener("change", function() {
            if (this.files.length > 0) {
                fileName.textContent = this.files[0].name;
                
                // Check file size
                if (this.files[0].size > 2 * 1024 * 1024) {
                    fileName.innerHTML += ' <span class="text-danger">(File too large!)</span>';
                    this.value = "";
                }
            } else {
                fileName.textContent = "";
            }
        });

        // Drag and drop functionality
        const fileUploadLabel = document.querySelector(".file-upload-label");
        
        fileUploadLabel.addEventListener("dragover", (e) => {
            e.preventDefault();
            fileUploadLabel.style.borderColor = "var(--primary-color)";
            fileUploadLabel.style.backgroundColor = "rgba(37, 99, 235, 0.1)";
        });
        
        fileUploadLabel.addEventListener("dragleave", () => {
            fileUploadLabel.style.borderColor = "#e2e8f0";
            fileUploadLabel.style.backgroundColor = "transparent";
        });
        
        fileUploadLabel.addEventListener("drop", (e) => {
            e.preventDefault();
            fileUploadLabel.style.borderColor = "#e2e8f0";
            fileUploadLabel.style.backgroundColor = "transparent";
            
            if (e.dataTransfer.files.length) {
                cvInput.files = e.dataTransfer.files;
                const event = new Event("change");
                cvInput.dispatchEvent(event);
            }
        });

        // Form submission
        form.addEventListener("submit", async function(e) {
            e.preventDefault();
            
            // Validate consent
            if (!document.getElementById("consent").checked) {
                Swal.fire({
                    icon: 'error',
                    title: 'Consent Required',
                    text: 'Please agree to our privacy policy before submitting',
                });
                return;
            }
            
            // Validate CV
            if (cvInput.files.length === 0) {
                Swal.fire({
                    icon: 'error',
                    title: 'CV Required',
                    text: 'Please upload your CV before submitting',
                });
                return;
            }
            
            const file = cvInput.files[0];
            if (file.size > 2 * 1024 * 1024) {
                Swal.fire({
                    icon: 'error',
                    title: 'File Too Large',
                    text: 'Please upload a file smaller than 2MB',
                });
                return;
            }

            // Show loading state
            submitText.textContent = "Uploading...";
            submitSpinner.classList.remove("d-none");
            progressBar.style.display = "block";

            const formData = new FormData(form);
            formData.append("consent", document.getElementById("consent").checked ? "Yes" : "No");

            // Simulate progress (remove in production)
            let progressValue = 0;
            const progressInterval = setInterval(() => {
                progressValue += Math.random() * 10;
                if (progressValue >= 90) clearInterval(progressInterval);
                progress.style.width = `${progressValue}%`;
                progress.setAttribute("aria-valuenow", progressValue);
            }, 200);

            try {
                const reader = new FileReader();
                reader.onload = async function() {
                    formData.append("cv", reader.result); // Full data URI
                    
                    const response = await fetch(scriptURL, {
                        method: "POST",
                        body: formData
                    });
                    
                    clearInterval(progressInterval);
                    progress.style.width = "100%";
                    progress.setAttribute("aria-valuenow", 100);
                    
                    const result = await response.json();
                    
                    if (result.result === "success") {
                        Swal.fire({
                            icon: 'success',
                            title: 'Application Submitted!',
                            text: 'Thank you for your application. We will review it and get back to you soon.',
                            showConfirmButton: false,
                            timer: 2000
                        });
                        
                        // Reset form
                        form.reset();
                        fileName.textContent = "";
                        progressBar.style.display = "none";
                    } else {
                        throw new Error(result.error || "Submission failed");
                    }
                };
                
                reader.readAsDataURL(file);
            } catch (error) {
                Swal.fire({
                    icon: 'error',
                    title: 'Submission Error',
                    text: error.message || 'Something went wrong. Please try again!',
                });
            } finally {
                submitText.textContent = "Submit Application";
                submitSpinner.classList.add("d-none");
                progressBar.style.display = "none";
                progress.style.width = "0%";
                progress.setAttribute("aria-valuenow", 0);
            }
        });

        // Animate form elements on scroll
        const animateOnScroll = function() {
            const elements = document.querySelectorAll('.animate-form');
            
            elements.forEach((element, index) => {
                const elementPosition = element.getBoundingClientRect().top;
                const windowHeight = window.innerHeight;
                
                if (elementPosition < windowHeight - 100) {
                    element.style.animationDelay = `${index * 0.1}s`;
                    element.classList.add('animate__animated', 'animate__fadeInUp');
                    element.style.opacity = '1';
                }
            });
        };

        // Initialize animations
        window.addEventListener('load', animateOnScroll);
        window.addEventListener('scroll', animateOnScroll);
    </script>
</body>
</html>